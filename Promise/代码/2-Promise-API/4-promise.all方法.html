<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        /**
         * Promise.all()
         * - 包含 n 个 promise 的数组
         * - 说明: 返回一个新的 promise, 只有所有的 promise 都成功才成功, 只要有一个失败了就直接失败
         */
        let p1 = new Promise((resolve, reject) => {
            resolve('OK')
                // reject('寄')
        })
        let p2 = new Promise((resolve, reject) => {
            resolve('Success')
                // reject('寄1')
        })
        let p3 = new Promise((resolve, reject) => {
            // reject('寄了')
            resolve('OKK')
        })
        let p = Promise.all([p1, p2, p3]) //只有他们三个promise都成功，p才是成功

        p.then(
                //p成功执行
                success => {
                    console.log('成功', success); //都成功的话，success就是p1，p2，p3 返回的数据组成的数组
                },
                //如果p失败执行
                reason => {
                    console.log('失败啦,原因是：', reason); //失败的话，返回的是[p1, p2, p3]从左到右第一次遇到错误的promise结果值(关键)
                }
            )
            //如果p成功执行

        console.log(p);
    </script>
</body>

</html>